!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){!function(){n(1);var e=n(2);$.event.fixHooks.drop={props:["dataTransfer"]},$.fn.getRect=function(){if(!this.length)return null;var e={};return this.each(function(){var t=this.getBoundingClientRect();void 0!==e.left?(e.left=Math.min(e.left,t.left),e.right=Math.max(e.right,t.right),e.top=Math.min(e.top,t.top),e.bottom=Math.max(e.bottom,t.bottom)):e={left:t.left,top:t.top,right:t.right,bottom:t.bottom}}),e.width=e.right-e.left,e.height=e.bottom-e.top,e},toastr.options={timeOut:1500},e.setOptions({renderer:function(e){return e.listitem=function(e){return/^\s*\[[x ]]\s*/.test(e)?'<li style="list-style: none">'+(e=e.replace(/^\s*\[ ]\s*/,'<input type="checkbox" class="task-list-item-checkbox"> ').replace(/^\s*\[x]\s*/,'<input type="checkbox" class="task-list-item-checkbox" checked="checked"> '))+"</li>":"<li>"+e+"</li>"},e}(new e.Renderer),highlight:function(e,t){return hljs.highlightAuto(e,[t]).value}}),$(window).on("beforeunload",function(){return"閉じますか？"});var t=null,r=$("#workspace").on("drop",function(e){return p(e.dataTransfer.files[0],function(e){o(e)}),!1}),s=$("#markdown").on("input change",function(){t&&clearTimeout(t),t=setTimeout(function(){e(this.value,function(e,t){if(e)return console.error(e);i.html(t).trigger("resize"),!0})}.bind(this),30)}),i=$("#preview").on("resize",function(){$(".fill").each(function(){var e=$(this),t=/(?:^|\s)fill-(\S+)/.exec(this.className),n=t?$(".fill-"+t[1]).getRect():null;n&&e.height(n.height)})}),o=function(e,t){return s.val(e||"").trigger("change"),"boolean"==typeof t&&t,this},l={get:function(e,t){try{var n=JSON.parse(localStorage.getItem("config"))}catch(e){}return n=n||{},e?void 0===n[e]?t:n[e]:n},set:function(e,t){if(e){var n=this.get();void 0===t?delete n[e]:n[e]=t,localStorage.setItem("config",JSON.stringify(n))}}},a=function(e,t){if(t=t||location.search.slice(1))for(var n,r=t.split(/&/g),s=0,i=r.length;s<i;s++)e[(n=r[s].split("="))[0]]&&e[n[0]](decodeURIComponent(n[1]))};function h(e){return void 0!==e&&(r.toggleClass("vertical",!!e),i.trigger("resize")),r.hasClass("vertical")-0}function u(e){switch(e%=3){case 0:s.show(),i.show();break;case 1:s.hide(),i.show();break;case 2:s.show(),i.hide()}return i.trigger("resize"),e}function c(e){$('<input type="file">').change(function(t){t.target.files.length&&e(t.target.files[0])}).appendTo("body").each(function(){this.click(),$(this).remove()})}function p(e,t){if(e){if(e.size>1e5)return toastr.info("File size is too large. (max: 100kB)");var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsText(e)}}function f(e){return(window.URL||window.webkitURL).createObjectURL(e)}function d(e){return $.ajax(e).then(function(t){o(t);var n=decodeURIComponent(e.split(/\//g).pop().split(/[?#]/)[0]);toastr.info(n,"Loaded")},function(){o("failed\n"+e),toastr.error(e,"Load error ?")})}function g(){var e=localStorage.getItem("md")||"",t=/^(\d{13}):/.exec(e);return t?e.substring(t[0].length):e}$("#menu").html(menu.start().add("Github",function(){window.open("https://github.com/HikaruYasuda/markdown-uml-js","_blank")}).add("Save","ex+s",function(){!function(e){var t=new Date-0+":";localStorage.setItem("md",t+e)}(s.val()),!1,toastr.info("Saved.")}).add("Reload","ex+r",function(){o(g(),!1),toastr.info("Reloaded.")}).add("Export...","ex+e",function(){var e=/^\s*#\s+([^\n]+)/gm.exec(s.val());!function(e,t){var n=f(new Blob([t],"text/markdown")),r=document.createElement("a");r.download=e,r.href=n,r.click()}((e?e[1]:"download")+".md",s.val())}).add("Import...","ex+i",function(){!function(e){c(function(t){p(t,e)})}(o)}).add("Open URL...",function(){var e=prompt("Input URL for open","https://raw.githubusercontent.com/HikaruYasuda/markdown-uml-js/master/README.md");e&&d(e)}).add("Attach Image...",function(){!function(e){c(function(t){!function(e,t){if(!e)return;if(e.size>1e6)return toastr.info("File size is too large. (max: 1MB)");t(f(e))}(t,e)})}(function(e){console.log(e)})}).add("V/H","ex+h",function(){l.set("vh",h(!h()))}).add("View","ex+/",function(){l.set("v",u(l.get("v",0)+1))}).add("Presentation","ex+P",function(){var e=document.getElementById("workspace");["webkitRequestFullScreen","mozRequestFullScreen"].forEach(function(t){e[t]&&e[t]()})}).html()),function(){var e,t=l.get("vh")-0,n=l.get("v",0);a({url:function(t){e=t},vh:function(e){t=e-0},editor:function(){n=2},preview:function(){n=1}}),h(t),u(n),e?(o("loading...\n"+e),d(e)):o(g(),!1)}()}()},function(module,exports){!function(){"use strict";var isOSX=/Mac|PPC/.test(navigator.userAgent),ex={ex:["e.ctrlKey ^ e.metaKey","&#x2318;","Ctrl"],ctrl:["e.ctrlKey","&#x2303;","Ctrl"],alt:["e.altKey","&#x2325;","Alt"],esc:["e.keyCode == 27","&#x238B;","Esc"],shift:["e.shiftKey","&#x21E7;","Shift"]},shiftKeyCodes={"*":186,"+":187,"<":188,"=":189,">":190,"?":191,"`":192,"{":219,"|":220,"}":221,"~":222,_:226},keyCodes={":":186,";":187,",":188,"-":189,".":190,"/":191,"@":192,"[":219,"¥":220,"]":221,"^":222,"\\":226};function check(menu,e){for(var i=0,ii=menu.requires.length;i<ii;i++)if(!eval(menu.requires[i]))return!1;return!!e}function escape(e){return e.replace(/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}window.menu={menus:[],eventTarget:window,start:function(e){return this.eventTarget=e||window,$(this.eventTarget).off("keydown.menu").on("keydown.menu",function(e){for(var t=0,n=this.menus.length;t<n;t++)if(check(this.menus[t],e))return this.call(t,e),!1}.bind(this)),this},stop:function(){return $(this.eventTarget).off("keydown.menu"),this},html:function(){var e="";return this.menus.forEach(function(t,n){if(t.title){var r=t.shortcuts.join(isOSX?"":"+");e+='<li><a href="javascript:menu.call('+n+')"><span>'+escape(t.title)+"</span>",r.length&&(e+='<span class="shortcut">'+escape(r)+"</span>"),e+="</a></li>\n"}}),e},call:function(e,t){var n=this.menus[e];n&&"function"==typeof n.callback&&n.callback(t||window.event,n)},add:function(e,t,n){"function"==typeof t&&(n=t,t="");for(var r,s=t.split(/\+/g),i=0,o=s.length,l=[],a=[];i<o;i++)ex[s[i]]?(l.push(ex[s[i]][0]),a.push(isOSX?ex[s[i]][1]:ex[s[i]][2])):"number"==typeof s[i]?(l.push("e.keyCode==="+s[i]),a.push(String.fromCharCode(s[i]))):(r=/^F([12][0-9]|[1-9])/i.exec(s[i]))?(l.push("e.keyCode==="+(r[1]+111)),a.push(r[0])):keyCodes[s[i]]?(l.push("!e.shiftKey"),l.push("e.keyCode==="+keyCodes[s[i]]),a.push(s[i])):shiftKeyCodes[s[i]]?(l.push(ex.shift[0]),l.push("e.keyCode==="+shiftKeyCodes[s[i]]),a.push(s[i])):"string"==typeof s[i]&&(s[i].toLowerCase()!==s[i]?(l.push(ex.shift[0]),a.push(isOSX?ex.shift[1]:ex.shift[2])):~l.indexOf("e.shiftKey")||l.push("!e.shiftKey"),s[i]=s[i].substr(0,1).toUpperCase(),l.push("e.keyCode==="+s[i].charCodeAt(0)),a.push(s[i]));return this.menus.push({requires:l,callback:n,title:e,shortcuts:a}),this}}}()},function(e,t,n){(function(t){(function(){"use strict";var t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:h,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:h,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:h,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};function n(e){this.tokens=[],this.tokens.links={},this.options=e||d.defaults,this.rules=t.normal,this.options.gfm&&(this.options.tables?this.rules=t.tables:this.rules=t.gfm)}t.bullet=/(?:[*+-]|\d+\.)/,t.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,t.item=a(t.item,"gm")(/bull/g,t.bullet)(),t.list=a(t.list)(/bull/g,t.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+t.def.source+")")(),t.blockquote=a(t.blockquote)("def",t.def)(),t._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",t.html=a(t.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,t._tag)(),t.paragraph=a(t.paragraph)("hr",t.hr)("heading",t.heading)("lheading",t.lheading)("blockquote",t.blockquote)("tag","<"+t._tag)("def",t.def)(),t.sequence=/^ *(?:sd *)(?: *(.*[^_])?)?_{2,}\/\n(?: *(\S.*\|.*)\n)?((?: *\S.*(?:\n|$))*)(?:\n|$)/i,t.sd_message=/^ *(x) *(<(?:-+|=+|\.+)|(?:-+|=+|\.+)>) *(x)? *$/,t.sd_fragment_start=/^ *(x) *\[ *(x(?: *, *x)*) *] *$/,t.sd_fragment_end=/^ *\/(x) *$/,t.sd_guard=/^ *([\[{]) *: *(.+)[\]}]? *$/,t.sd_note=/^ *(x)? *\[ *(<?x(?: *, *x)*>?)? *] *(x)? *$/,t._x=/[^\[\]\-:=.<> ]+(?:[^\[\]:.<> ]+[^\[\]\-:=.<> ])?/,t.sd_message=a(t.sd_message)(/x/g,t._x)(),t.sd_note=a(t.sd_note)(/x/g,t._x)(),t.sd_fragment_start=a(t.sd_fragment_start)(/x/g,t._x)(),t.sd_fragment_end=a(t.sd_fragment_end)(/x/g,t._x)(),t.normal=u({},t),t.gfm=u({},t.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),t.gfm.paragraph=a(t.paragraph)("(?!","(?!"+t.gfm.fences.source.replace("\\1","\\2")+"|"+t.list.source.replace("\\1","\\3")+"|")(),t.tables=u({},t.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),n.rules=t,n.lex=function(e,t){return new n(t).lex(e)},n.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},n.prototype.token=function(e,n,r){var s,i,o,l,a,h,u,c,p;for(e=e.replace(/^ +$/gm,"");e;)if((o=this.rules.newline.exec(e))&&(e=e.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(e))e=e.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});else if(o=this.rules.fences.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]||""});else if(o=this.rules.heading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(n&&(o=this.rules.sequence.exec(e)))e=e.substring(o[0].length),this.tokens.push(this.sequence(o));else if(n&&(o=this.rules.nptable.exec(e))){for(e=e.substring(o[0].length),h={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")},c=0;c<h.align.length;c++)/^ *-+: *$/.test(h.align[c])?h.align[c]="right":/^ *:-+: *$/.test(h.align[c])?h.align[c]="center":/^ *:-+ *$/.test(h.align[c])?h.align[c]="left":h.align[c]=null;for(c=0;c<h.cells.length;c++)h.cells[c]=h.cells[c].split(/ *\| */);this.tokens.push(h)}else if(o=this.rules.lheading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(o=this.rules.hr.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,n,!0),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(e)){for(e=e.substring(o[0].length),l=o[2],this.tokens.push({type:"list_start",ordered:l.length>1}),s=!1,p=(o=o[0].match(this.rules.item)).length,c=0;c<p;c++)u=(h=o[c]).length,~(h=h.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(u-=h.length,h=this.options.pedantic?h.replace(/^ {1,4}/gm,""):h.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&c!==p-1&&(l===(a=t.bullet.exec(o[c+1])[0])||l.length>1&&a.length>1||(e=o.slice(c+1).join("\n")+e,c=p-1)),i=s||/\n\n(?!\s*$)/.test(h),c!==p-1&&(s="\n"===h.charAt(h.length-1),i||(i=s)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(h,!1,r),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(e))e=e.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===o[1]||"script"===o[1]||"style"===o[1]),text:o[0]});else if(!r&&n&&(o=this.rules.def.exec(e)))e=e.substring(o[0].length),this.tokens.links[o[1].toLowerCase()]={href:o[2],title:o[3]};else if(n&&(o=this.rules.table.exec(e))){for(e=e.substring(o[0].length),h={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<h.align.length;c++)/^ *-+: *$/.test(h.align[c])?h.align[c]="right":/^ *:-+: *$/.test(h.align[c])?h.align[c]="center":/^ *:-+ *$/.test(h.align[c])?h.align[c]="left":h.align[c]=null;for(c=0;c<h.cells.length;c++)h.cells[c]=h.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(h)}else if(n&&(o=this.rules.paragraph.exec(e)))e=e.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens},n.prototype.sequence=function(e){var t,n,r,s,i,o,l={"-":"sync","=":"async",".":"reply"},a={},h=[],u={},f=(e[1]||"").replace(/ +$/,""),d=e[2]?e[2].replace(/^ *|( *\|)? *$/g,"").split(/ *\| */):[],g=e[3]?e[3].replace(/\n+$/,"").split("\n"):[],m=[];for(t=d.length-1;t>=0;t--)(o=d[t].replace(/ *= */,"\t").split("\t")).length>1?(a[o[0]]=t,d[t]=o[1]):a[d[t]]=t;for(;r=g.shift();)if(s=(i=r.replace(/ *: */,"\t").split("\t"))[0],i=i[1],e=this.rules.sd_message.exec(s)){for(o=/(^<)?([-=.])+(>$)?/.exec(e[2]),s={type:"message",left:x(e[1]),right:x(e[3]),dir:"self",line:l[o[2]],desc:i},e[3]&&(o[1]?s.dir="left":o[3]&&(s.dir="right")),s.from="left"===s.dir?s.right:s.left,s.to="right"===s.dir?s.right:s.left,s.starts={},s.ends={},u[s.from]||(u[s.from]=s.starts[s.from]=!0),e[3]&&!u[s.to]&&(u[s.to]=s.starts[s.to]=!0),n=m.length-1;n>=0;n--)if("message"===m[n].type){if("self"!==m[n].dir&&m[n].to===s.from){delete s.starts[s.from];break}delete m[n].starts[s.from],delete m[n].ends[s.from]}"reply"===s.line&&(delete u[s.from],s.ends[s.from]=!0),m.push(s)}else if(e=this.rules.sd_fragment_start.exec(s)){for(s={type:"fragment_start",name:e[1],depth:h.length,desc:i},o=e[2].split(/ *, */),n=0;n<o.length;n++)o[n]=x(o[n]);s.on=c(o),s.size=p(o)-s.on+1,m.push(s),h.push(s)}else if((e=this.rules.sd_guard.exec(r))&&h.length)m.push({type:"guard",ends:e[1],desc:i});else{if(e=this.rules.sd_fragment_end.exec(s)){for(o=[],n=h.length-1;n>=0;n--)if(o.push({type:"fragment_end"}),h[n].name===e[1]){Array.prototype.push.apply(m,o),h=h.slice(0,-o.length),o=null;break}if(null===o)continue}if(e=this.rules.sd_note.exec(s)){if(s={type:"note",size:1,align:"center",desc:i},e[2]&&(/^</.exec(e[2])?(e[2]=e[2].replace(/^</,""),s.align="left"):/>$/.exec(e[2])&&(e[2]=e[2].replace(/>$/,""),s.align="right")),e[2]){for(s.side="over",n=(o=e[2].split(/ *, */)).length-1;n>=0;n--)o[n]=x(o[n]);s.on=c(o),s.size=p(o)-s.on+1}else e[1]?(s.side="right",s.on=x(e[1])):(s.side="left",s.on=x(e[3]));m.push(s)}else m.length?((s=m.pop()).desc+="\n"+r,m.push(s)):console.log("unmatch",r)}return{type:"sequence",title:f,actors:d,signals:m};function x(e){return void 0===e?null:(void 0===a[e]&&(a[e]=d.length,d.push(e)),a[e])}};var r={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:h,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:h,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};function s(e,t){if(this.options=t||d.defaults,this.links=e,this.rules=r.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=r.breaks:this.rules=r.gfm:this.options.pedantic&&(this.rules=r.pedantic)}function i(e){this.options=e||{}}function o(e){this.tokens=[],this.token=null,this.options=e||d.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function l(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function a(e,t){return e=e.source,t=t||"",function n(r,s){return r?(s=(s=s.source||s).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,s),n):new RegExp(e,t)}}function h(){}function u(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function c(e){return Math.min.apply(Math,e)}function p(e){return Math.max.apply(Math,e)}function f(e){var t,n,r=e||"";for(n=0;n<6;n++)t=16*Math.random()|0,r+=(12==n?4:16==n?3&t|8:t).toString(16);return r}function d(e,t,r){if(r||"function"==typeof t){r||(r=t,t=null);var s,i,a=(t=u({},d.defaults,t||{})).highlight,h=0;try{s=n.lex(e,t)}catch(e){return r(e)}i=s.length;var c=function(e){if(e)return t.highlight=a,r(e);var n;try{n=o.parse(s,t)}catch(t){e=t}return t.highlight=a,e?r(e):r(null,n)};if(!a||a.length<3)return c();if(delete t.highlight,!i)return c();for(;h<s.length;h++)!function(e){"code"!==e.type?--i||c():a(e.text,e.lang,function(t,n){return t?c(t):null==n||n===e.text?--i||c():(e.text=n,e.escaped=!0,void(--i||c()))})}(s[h])}else try{return t&&(t=u({},d.defaults,t)),o.parse(n.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/chjj/marked.",(t||d.defaults).silent)return"<p>An error occured:</p><pre>"+l(e.message+"",!0)+"</pre>";throw e}}r._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,r._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,r.link=a(r.link)("inside",r._inside)("href",r._href)(),r.reflink=a(r.reflink)("inside",r._inside)(),r.normal=u({},r),r.pedantic=u({},r.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),r.gfm=u({},r.normal,{escape:a(r.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:a(r.text)("]|","~]|")("|","|https?://|")()}),r.breaks=u({},r.gfm,{br:a(r.br)("{2,}","*")(),text:a(r.gfm.text)("{2,}","*")()}),s.rules=r,s.output=function(e,t,n){return new s(t,n).output(e)},s.prototype.output=function(e){for(var t,n,r,s,i="";e;)if(s=this.rules.escape.exec(e))e=e.substring(s[0].length),i+=s[1];else if(s=this.rules.autolink.exec(e))e=e.substring(s[0].length),"@"===s[2]?(n=":"===s[1].charAt(6)?this.mangle(s[1].substring(7)):this.mangle(s[1]),r=this.mangle("mailto:")+n):r=n=l(s[1]),i+=this.renderer.link(r,null,n);else if(this.inLink||!(s=this.rules.url.exec(e))){if(s=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(s[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(s[0])&&(this.inLink=!1),e=e.substring(s[0].length),i+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):l(s[0]):s[0];else if(s=this.rules.link.exec(e))e=e.substring(s[0].length),this.inLink=!0,i+=this.outputLink(s,{href:s[2],title:s[3]}),this.inLink=!1;else if((s=this.rules.reflink.exec(e))||(s=this.rules.nolink.exec(e))){if(e=e.substring(s[0].length),t=(s[2]||s[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){i+=s[0].charAt(0),e=s[0].substring(1)+e;continue}this.inLink=!0,i+=this.outputLink(s,t),this.inLink=!1}else if(s=this.rules.strong.exec(e))e=e.substring(s[0].length),i+=this.renderer.strong(this.output(s[2]||s[1]));else if(s=this.rules.em.exec(e))e=e.substring(s[0].length),i+=this.renderer.em(this.output(s[2]||s[1]));else if(s=this.rules.code.exec(e))e=e.substring(s[0].length),i+=this.renderer.codespan(l(s[2],!0));else if(s=this.rules.br.exec(e))e=e.substring(s[0].length),i+=this.renderer.br();else if(s=this.rules.del.exec(e))e=e.substring(s[0].length),i+=this.renderer.del(this.output(s[1]));else if(s=this.rules.text.exec(e))e=e.substring(s[0].length),i+=this.renderer.text(l(this.smartypants(s[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(s[0].length),r=n=l(s[1]),i+=this.renderer.link(r,null,n);return i},s.prototype.outputLink=function(e,t){var n=l(t.href),r=t.title?l(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,l(e[1]))},s.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},s.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,s=0;s<r;s++)t=e.charCodeAt(s),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},i.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+l(t,!0)+'">'+(n?e:l(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:l(e,!0))+"\n</code></pre>"},i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.prototype.html=function(e){return e},i.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},i.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(function(e){return e.replace(/&([#\w]+);/g,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:"))return""}var s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+n+"</a>"},i.prototype.image=function(e,t,n){var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},i.prototype.text=function(e){return e},i.prototype.sequence={fragment_start:function(e,t,n){var r=2*e.on+1,s=2*e.size,i='<div class="fragment '+("fragment--"+e.name+" fragment-depth--"+e.depth)+'">'+('<div class="fill fill-'+e.id+'"></div>')+'<div class="fragment-title"><span>'+e.name+" "+t+"</span></div></div>";return this._row(r,s,i,n)},fragment_end:function(e,t){var n=2*e.on+1,r=2*e.size,s='<div class="fragment-end '+("fragment--"+e.name+" fragment-depth--"+e.depth)+" fill-"+e.id+'"></div>';return this._row(n,r,s,t)},guard:function(e,t,n,r){var s=2*e.on+1,i=2*e.size,o="fragment--"+e.name+" fragment-depth--"+e.depth,l={"[":"]","{":"}"}[t],a='<div class="guard '+o+" "+(e.guards?"bordered":"")+'"><span>'+t+n+l+"</span></div>";return this._row(s,i,a,r)},message:function(e,t,n){var r=2*e.left+2,s=Math.max(2*(e.right-e.left),1),i='<div class="message '+e.line+" "+e.dir+'"><span>'+t+"</span></div>";return this._row(r,s,i,n)},note:function(e,t,n){var r=2*e.on+("left"===e.side?0:"over"===e.side?1:2),s=Math.max(2*e.size,1),i='<div class="note'+(" align-"+e.align)+'">'+t+"</div>";return this._row(r,s,i,n)},padding:function(e,t){var n='<td colspan="2">'+(t?'<div class="fill fill-'+t+'"></div>':"")+"</td>";return'<tr class="padding"><td colspan="2"></td>'+new Array(e+1).join(n)+"</tr>"},execution:function(e,t,n){var r='<tr class="execution"><td colspan="2"></td>';t=t||[];for(var s=0;s<e;s++)r+='<td colspan="2">',n[s]?r+='<div class="fill fill-'+n[s]+'"></div>':t[s]&&(r+='<div class="fill--end fill-'+t[s]+'"></div>'),r+="</td>";return r+"</tr>"},_row:function(e,t,n,r){var s,i="<tr>",o=0;do{s=1&o?"":'class="pipe"',i+=o===e?'<td colspan="'+t+'" '+s+">"+n+"</td>":"<td "+s+"></td>"}while((o+=o===e?t:1)<r);return i+"</tr>\n"}},o.parse=function(e,t,n){return new o(t,n).parse(e)},o.prototype.parse=function(e){this.inline=new s(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},o.prototype.next=function(){return this.token=this.tokens.pop()},o.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},o.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},o.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"sequence":return this.sequence(this.token);case"table":var e,t,n,r,s="",i="";for(n="",e=0;e<this.token.header.length;e++)({header:!0,align:this.token.align[e]}),n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(s+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});i+=this.renderer.tablerow(n)}return this.renderer.table(s,i);case"blockquote_start":for(i="";"blockquote_end"!==this.next().type;)i+=this.tok();return this.renderer.blockquote(i);case"list_start":i="";for(var o=this.token.ordered;"list_end"!==this.next().type;)i+=this.tok();return this.renderer.list(i,o);case"list_item_start":for(i="";"list_item_end"!==this.next().type;)i+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(i);case"loose_item_start":for(i="";"list_item_end"!==this.next().type;)i+=this.tok();return this.renderer.listitem(i);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},o.prototype.sequence=function(e){var t,n,r,s,i,o="",l=this.renderer.sequence,a=e.actors.length,h=new Array(a),u=e.signals,c=[],p=2*a+2,d=this.inline.output(e.title),g=f();for(o+='<div class="sequence-diagram">\n<div class="diagram-title"><span>'+d+'</span></div><div class="diagram-body">\n<table class="table"><thead><tr><th></th>\n',t=0;t<a;t++)o+='<th colspan="2"><div class="actor">'+(d=this.inline.output(e.actors[t]))+"</div></th>\n";for(o+='<th></th></tr></thead><tbody class="fill-'+g+'">\n',o+=l.padding(a,g),t=0;t<u.length;t++){switch(r=u[t],d=this.inline.output(r.desc),r.type){case"message":for(n in i={},o+=l.message(r,d,p),r.starts)r.starts.hasOwnProperty(n)&&(i[n]=h[n]=f());for(n in o+=l.execution(a,h,i),r.ends)r.ends.hasOwnProperty(n)&&delete h[n];break;case"note":o+=l.note(r,d,p);break;case"fragment_start":if(c.unshift({name:r.name,on:r.on,size:r.size,guards:0,depth:c.length,id:f(r.name)}),o+=l.fragment_start(c[0],d,p),u[t+1]&&"guard"===u[t+1].type)continue;break;case"fragment_end":s=c.shift(),o+=l.fragment_end(s,p);break;case"guard":c.length&&(o+=l.guard(c[0],r.ends,d,p),c[0].guards++)}o+=l.padding(a)}for(;c.length;)o+=l.fragment_end(c[0],p),o+=l.padding(a),c.shift();return o+=l.padding(a),o+="</tbody></table></div></div>\n"},h.exec=h,d.options=d.setOptions=function(e){return u(d.defaults,e),d},d.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1},d.Parser=o,d.parser=o.parse,d.Renderer=i,d.Lexer=n,d.lexer=n.lex,d.InlineLexer=s,d.inlineLexer=s.output,d.parse=d,e.exports=d}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(this,n(3))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n}]);