!function(e){function t(r){if(n[r])return n[r].exports;var s=n[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){!function(){function e(e){return void 0!==e&&(m.toggleClass("vertical",!!e),k.trigger("resize")),m.hasClass("vertical")-0}function t(e){switch(e%=3){case 0:x.show(),k.show();break;case 1:x.hide(),k.show();break;case 2:x.show(),k.hide()}return k.trigger("resize"),e}function r(e,t){var n=h(new Blob([t],"text/markdown")),r=document.createElement("a");r.download=e,r.href=n,r.click()}function s(e){$('<input type="file">').change(function(t){t.target.files.length&&e(t.target.files[0])}).appendTo("body").each(function(){this.click(),$(this).remove()})}function i(e){s(function(t){l(t,e)})}function o(e){s(function(t){a(t,e)})}function l(e,t){if(e){if(e.size>1e5)return toastr.info("File size is too large. (max: 100kB)");var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsText(e)}}function a(e,t){if(e)return e.size>1e6?toastr.info("File size is too large. (max: 1MB)"):void t(h(e))}function h(e){return(window.URL||window.webkitURL).createObjectURL(e)}function u(e){return $.ajax(e).then(function(t){b(t);var n=decodeURIComponent(e.split(/\//g).pop().split(/[?#]/)[0]);toastr.info(n,"Loaded")},function(){b("failed\n"+e),toastr.error(e,"Load error ?")})}function c(){var e=localStorage.getItem("md")||"",t=/^(\d{13}):/.exec(e);return t?e.substring(t[0].length):e}function p(e){var t=new Date-0+":";localStorage.setItem("md",t+e)}n(1);var d=n(2);$.event.fixHooks.drop={props:["dataTransfer"]},$.fn.getRect=function(){if(!this.length)return null;var e={};return this.each(function(){var t=this.getBoundingClientRect();void 0!==e.left?(e.left=Math.min(e.left,t.left),e.right=Math.max(e.right,t.right),e.top=Math.min(e.top,t.top),e.bottom=Math.max(e.bottom,t.bottom)):e={left:t.left,top:t.top,right:t.right,bottom:t.bottom}}),e.width=e.right-e.left,e.height=e.bottom-e.top,e},toastr.options={timeOut:1500},d.setOptions({renderer:function(e){return e.listitem=function(e){return/^\s*\[[x ]]\s*/.test(e)?'<li style="list-style: none">'+(e=e.replace(/^\s*\[ ]\s*/,'<input type="checkbox" class="task-list-item-checkbox"> ').replace(/^\s*\[x]\s*/,'<input type="checkbox" class="task-list-item-checkbox" checked="checked"> '))+"</li>":"<li>"+e+"</li>"},e}(new d.Renderer),highlight:function(e,t){return hljs.highlightAuto(e,[t]).value}}),$(window).on("beforeunload",function(){return"閉じますか？"});var f=!1,g=null,m=$("#workspace").on("drop",function(e){return l(e.dataTransfer.files[0],function(e){b(e)}),!1}),x=$("#markdown").on("input change",function(){g&&clearTimeout(g),g=setTimeout(function(){d(this.value,function(e,t){if(e)return console.error(e);k.html(t).trigger("resize"),f=!0})}.bind(this),30)}),k=$("#preview").on("resize",function(){$(".fill").each(function(){var e=$(this),t=/(?:^|\s)fill-(\S+)/.exec(this.className),n=t?$(".fill-"+t[1]).getRect():null;n&&e.height(n.height)})}),b=function(e,t){return x.val(e||"").trigger("change"),"boolean"==typeof t&&(f=t),this},y={get:function(e,t){try{var n=JSON.parse(localStorage.getItem("config"))}catch(e){}return n=n||{},e?void 0===n[e]?t:n[e]:n},set:function(e,t){if(e){var n=this.get();void 0===t?delete n[e]:n[e]=t,localStorage.setItem("config",JSON.stringify(n))}}},v=function(e,t){if(t=t||location.search.slice(1))for(var n,r=t.split(/&/g),s=0,i=r.length;s<i;s++)n=r[s].split("="),e[n[0]]&&e[n[0]](decodeURIComponent(n[1]))};$("#menu").html(menu.start().add("Github",function(){window.open("https://github.com/HikaruYasuda/markdown-uml-js","_blank")}).add("Save","ex+s",function(){p(x.val()),f=!1,toastr.info("Saved.")}).add("Reload","ex+r",function(){b(c(),!1),toastr.info("Reloaded.")}).add("Export...","ex+e",function(){var e=/^\s*#\s+([^\n]+)/gm.exec(x.val());r((e?e[1]:"download")+".md",x.val())}).add("Import...","ex+i",function(){i(b)}).add("Open URL...",function(){var e=prompt("Input URL for open","https://raw.githubusercontent.com/HikaruYasuda/markdown-uml-js/master/README.md");e&&u(e)}).add("Attach Image...",function(){o(function(e){console.log(e)})}).add("V/H","ex+h",function(){y.set("vh",e(!e()))}).add("View","ex+/",function(){y.set("v",t(y.get("v",0)+1))}).add("Presentation","ex+P",function(){var e=document.getElementById("workspace");["webkitRequestFullScreen","mozRequestFullScreen"].forEach(function(t){e[t]&&e[t]()})}).html()),function(){var n,r=y.get("vh")-0,s=y.get("v",0);v({url:function(e){n=e},vh:function(e){r=e-0},editor:function(){s=2},preview:function(){s=1}}),e(r),t(s),n?(b("loading...\n"+n),u(n)):b(c(),!1)}()}()},function(module,exports){!function(){"use strict";function check(menu,e){for(var i=0,ii=menu.requires.length;i<ii;i++)if(!eval(menu.requires[i]))return!1;return!!e}function escape(e){return e.replace(/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var isOSX=/Mac|PPC/.test(navigator.userAgent),ex={ex:["e.ctrlKey ^ e.metaKey","&#x2318;","Ctrl"],ctrl:["e.ctrlKey","&#x2303;","Ctrl"],alt:["e.altKey","&#x2325;","Alt"],esc:["e.keyCode == 27","&#x238B;","Esc"],shift:["e.shiftKey","&#x21E7;","Shift"]},shiftKeyCodes={"*":186,"+":187,"<":188,"=":189,">":190,"?":191,"`":192,"{":219,"|":220,"}":221,"~":222,_:226},keyCodes={":":186,";":187,",":188,"-":189,".":190,"/":191,"@":192,"[":219,"¥":220,"]":221,"^":222,"\\":226};window.menu={menus:[],eventTarget:window,start:function(e){return this.eventTarget=e||window,$(this.eventTarget).off("keydown.menu").on("keydown.menu",function(e){for(var t=0,n=this.menus.length;t<n;t++)if(check(this.menus[t],e))return this.call(t,e),!1}.bind(this)),this},stop:function(){return $(this.eventTarget).off("keydown.menu"),this},html:function(){var e="";return this.menus.forEach(function(t,n){if(t.title){var r=t.shortcuts.join(isOSX?"":"+");e+='<li><a href="javascript:menu.call('+n+')"><span>'+escape(t.title)+"</span>",r.length&&(e+='<span class="shortcut">'+escape(r)+"</span>"),e+="</a></li>\n"}}),e},call:function(e,t){var n=this.menus[e];n&&"function"==typeof n.callback&&n.callback(t||window.event,n)},add:function(e,t,n){"function"==typeof t&&(n=t,t="");for(var r,s=t.split(/\+/g),i=0,o=s.length,l=[],a=[];i<o;i++)ex[s[i]]?(l.push(ex[s[i]][0]),a.push(isOSX?ex[s[i]][1]:ex[s[i]][2])):"number"==typeof s[i]?(l.push("e.keyCode==="+s[i]),a.push(String.fromCharCode(s[i]))):(r=/^F([12][0-9]|[1-9])/i.exec(s[i]))?(l.push("e.keyCode==="+(r[1]+111)),a.push(r[0])):keyCodes[s[i]]?(l.push("!e.shiftKey"),l.push("e.keyCode==="+keyCodes[s[i]]),a.push(s[i])):shiftKeyCodes[s[i]]?(l.push(ex.shift[0]),l.push("e.keyCode==="+shiftKeyCodes[s[i]]),a.push(s[i])):"string"==typeof s[i]&&(s[i].toLowerCase()!==s[i]?(l.push(ex.shift[0]),a.push(isOSX?ex.shift[1]:ex.shift[2])):~l.indexOf("e.shiftKey")||l.push("!e.shiftKey"),s[i]=s[i].substr(0,1).toUpperCase(),l.push("e.keyCode==="+s[i].charCodeAt(0)),a.push(s[i]));return this.menus.push({requires:l,callback:n,title:e,shortcuts:a}),this}}}()},function(e,t,n){(function(t){(function(){"use strict";function t(e){this.tokens=[],this.tokens.links={},this.options=e||d.defaults,this.rules=f.normal,this.options.gfm&&(this.options.tables?this.rules=f.tables:this.rules=f.gfm)}function n(e,t){if(this.options=t||d.defaults,this.links=e,this.rules=g.normal,this.renderer=this.options.renderer||new r,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=g.breaks:this.rules=g.gfm:this.options.pedantic&&(this.rules=g.pedantic)}function r(e){this.options=e||{}}function s(e){this.tokens=[],this.token=null,this.options=e||d.defaults,this.options.renderer=this.options.renderer||new r,this.renderer=this.options.renderer,this.renderer.options=this.options}function i(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function l(e,t){return e=e.source,t=t||"",function n(r,s){return r?(s=s.source||s,s=s.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,s),n):new RegExp(e,t)}}function a(){}function h(e){for(var t,n,r=1;r<arguments.length;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function u(e){return Math.min.apply(Math,e)}function c(e){return Math.max.apply(Math,e)}function p(e){var t,n,r=e||"";for(n=0;n<6;n++)t=16*Math.random()|0,r+=(12==n?4:16==n?3&t|8:t).toString(16);return r}function d(e,n,r){if(r||"function"==typeof n){r||(r=n,n=null),n=h({},d.defaults,n||{});var o,l,a=n.highlight,u=0;try{o=t.lex(e,n)}catch(e){return r(e)}l=o.length;var c=function(e){if(e)return n.highlight=a,r(e);var t;try{t=s.parse(o,n)}catch(t){e=t}return n.highlight=a,e?r(e):r(null,t)};if(!a||a.length<3)return c();if(delete n.highlight,!l)return c();for(;u<o.length;u++)!function(e){"code"!==e.type?--l||c():a(e.text,e.lang,function(t,n){return t?c(t):null==n||n===e.text?--l||c():(e.text=n,e.escaped=!0,void(--l||c()))})}(o[u])}else try{return n&&(n=h({},d.defaults,n)),s.parse(t.lex(e,n),n)}catch(e){if(e.message+="\nPlease report this to https://github.com/chjj/marked.",(n||d.defaults).silent)return"<p>An error occured:</p><pre>"+i(e.message+"",!0)+"</pre>";throw e}}var f={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:a,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:a,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:a,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};f.bullet=/(?:[*+-]|\d+\.)/,f.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,f.item=l(f.item,"gm")(/bull/g,f.bullet)(),f.list=l(f.list)(/bull/g,f.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+f.def.source+")")(),f.blockquote=l(f.blockquote)("def",f.def)(),f._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",f.html=l(f.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,f._tag)(),f.paragraph=l(f.paragraph)("hr",f.hr)("heading",f.heading)("lheading",f.lheading)("blockquote",f.blockquote)("tag","<"+f._tag)("def",f.def)(),f.sequence=/^ *(?:sd *)(?: *(.*[^_])?)?_{2,}\/\n(?: *(\S.*\|.*)\n)?((?: *\S.*(?:\n|$))*)(?:\n|$)/i,f.sd_message=/^ *(x) *(<(?:-+|=+|\.+)|(?:-+|=+|\.+)>) *(x)? *$/,f.sd_fragment_start=/^ *(x) *\[ *(x(?: *, *x)*) *] *$/,f.sd_fragment_end=/^ *\/(x) *$/,f.sd_guard=/^ *([\[{]) *: *(.+)[\]}]? *$/,f.sd_note=/^ *(x)? *\[ *(<?x(?: *, *x)*>?)? *] *(x)? *$/,f._x=/[^\[\]\-:=.<> ]+(?:[^\[\]:.<> ]+[^\[\]\-:=.<> ])?/,f.sd_message=l(f.sd_message)(/x/g,f._x)(),f.sd_note=l(f.sd_note)(/x/g,f._x)(),f.sd_fragment_start=l(f.sd_fragment_start)(/x/g,f._x)(),f.sd_fragment_end=l(f.sd_fragment_end)(/x/g,f._x)(),f.normal=h({},f),f.gfm=h({},f.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),f.gfm.paragraph=l(f.paragraph)("(?!","(?!"+f.gfm.fences.source.replace("\\1","\\2")+"|"+f.list.source.replace("\\1","\\3")+"|")(),f.tables=h({},f.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=f,t.lex=function(e,n){return new t(n).lex(e)},t.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},t.prototype.token=function(e,t,n){var r,s,i,o,l,a,h,u,c;for(e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),i[0].length>1&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]||""});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(t&&(i=this.rules.sequence.exec(e)))e=e.substring(i[0].length),this.tokens.push(this.sequence(i));else if(t&&(i=this.rules.nptable.exec(e))){for(e=e.substring(i[0].length),a={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/\n$/,"").split("\n")},u=0;u<a.align.length;u++)/^ *-+: *$/.test(a.align[u])?a.align[u]="right":/^ *:-+: *$/.test(a.align[u])?a.align[u]="center":/^ *:-+ *$/.test(a.align[u])?a.align[u]="left":a.align[u]=null;for(u=0;u<a.cells.length;u++)a.cells[u]=a.cells[u].split(/ *\| */);this.tokens.push(a)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t,!0),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),o=i[2],this.tokens.push({type:"list_start",ordered:o.length>1}),i=i[0].match(this.rules.item),r=!1,c=i.length,u=0;u<c;u++)a=i[u],h=a.length,a=a.replace(/^ *([*+-]|\d+\.) +/,""),~a.indexOf("\n ")&&(h-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+h+"}","gm"),"")),this.options.smartLists&&u!==c-1&&(l=f.bullet.exec(i[u+1])[0],o===l||o.length>1&&l.length>1||(e=i.slice(u+1).join("\n")+e,u=c-1)),s=r||/\n\n(?!\s*$)/.test(a),u!==c-1&&(r="\n"===a.charAt(a.length-1),s||(s=r)),this.tokens.push({type:s?"loose_item_start":"list_item_start"}),this.token(a,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===i[1]||"script"===i[1]||"style"===i[1]),text:i[0]});else if(!n&&t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),this.tokens.links[i[1].toLowerCase()]={href:i[2],title:i[3]};else if(t&&(i=this.rules.table.exec(e))){for(e=e.substring(i[0].length),a={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/(?: *\| *)?\n$/,"").split("\n")},u=0;u<a.align.length;u++)/^ *-+: *$/.test(a.align[u])?a.align[u]="right":/^ *:-+: *$/.test(a.align[u])?a.align[u]="center":/^ *:-+ *$/.test(a.align[u])?a.align[u]="left":a.align[u]=null;for(u=0;u<a.cells.length;u++)a.cells[u]=a.cells[u].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(a)}else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens},t.prototype.sequence=function(e){function t(e){return void 0===e?null:(void 0===h[e]&&(h[e]=g.length,g.push(e)),h[e])}var n,r,s,i,o,l,a={"-":"sync","=":"async",".":"reply"},h={},p=[],d={},f=(e[1]||"").replace(/ +$/,""),g=e[2]?e[2].replace(/^ *|( *\|)? *$/g,"").split(/ *\| */):[],m=e[3]?e[3].replace(/\n+$/,"").split("\n"):[],x=[];for(n=g.length-1;n>=0;n--)l=g[n].replace(/ *= */,"\t").split("\t"),l.length>1?(h[l[0]]=n,g[n]=l[1]):h[g[n]]=n;for(;s=m.shift();)if(o=s.replace(/ *: */,"\t").split("\t"),i=o[0],o=o[1],e=this.rules.sd_message.exec(i)){for(l=/(^<)?([-=.])+(>$)?/.exec(e[2]),i={type:"message",left:t(e[1]),right:t(e[3]),dir:"self",line:a[l[2]],desc:o},e[3]&&(l[1]?i.dir="left":l[3]&&(i.dir="right")),i.from="left"===i.dir?i.right:i.left,i.to="right"===i.dir?i.right:i.left,i.starts={},i.ends={},d[i.from]||(d[i.from]=i.starts[i.from]=!0),e[3]&&!d[i.to]&&(d[i.to]=i.starts[i.to]=!0),r=x.length-1;r>=0;r--)if("message"===x[r].type){if("self"!==x[r].dir&&x[r].to===i.from){delete i.starts[i.from];break}delete x[r].starts[i.from],delete x[r].ends[i.from]}"reply"===i.line&&(delete d[i.from],i.ends[i.from]=!0),x.push(i)}else if(e=this.rules.sd_fragment_start.exec(i)){for(i={type:"fragment_start",name:e[1],depth:p.length,desc:o},l=e[2].split(/ *, */),r=0;r<l.length;r++)l[r]=t(l[r]);i.on=u(l),i.size=c(l)-i.on+1,x.push(i),p.push(i)}else if((e=this.rules.sd_guard.exec(s))&&p.length)x.push({type:"guard",ends:e[1],desc:o});else{if(e=this.rules.sd_fragment_end.exec(i)){for(l=[],r=p.length-1;r>=0;r--)if(l.push({type:"fragment_end"}),p[r].name===e[1]){Array.prototype.push.apply(x,l),p=p.slice(0,-l.length),l=null;break}if(null===l)continue}if(e=this.rules.sd_note.exec(i)){if(i={type:"note",size:1,align:"center",desc:o},e[2]&&(/^</.exec(e[2])?(e[2]=e[2].replace(/^</,""),i.align="left"):/>$/.exec(e[2])&&(e[2]=e[2].replace(/>$/,""),i.align="right")),e[2]){for(i.side="over",l=e[2].split(/ *, */),r=l.length-1;r>=0;r--)l[r]=t(l[r]);i.on=u(l),i.size=c(l)-i.on+1}else e[1]?(i.side="right",i.on=t(e[1])):(i.side="left",i.on=t(e[3]));x.push(i)}else x.length?(i=x.pop(),i.desc+="\n"+s,x.push(i)):console.log("unmatch",s)}return{type:"sequence",title:f,actors:g,signals:x}};var g={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:a,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:a,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};g._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,g._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,g.link=l(g.link)("inside",g._inside)("href",g._href)(),g.reflink=l(g.reflink)("inside",g._inside)(),g.normal=h({},g),g.pedantic=h({},g.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),g.gfm=h({},g.normal,{escape:l(g.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:l(g.text)("]|","~]|")("|","|https?://|")()}),g.breaks=h({},g.gfm,{br:l(g.br)("{2,}","*")(),text:l(g.gfm.text)("{2,}","*")()}),n.rules=g,n.output=function(e,t,r){return new n(t,r).output(e)},n.prototype.output=function(e){for(var t,n,r,s,o="";e;)if(s=this.rules.escape.exec(e))e=e.substring(s[0].length),o+=s[1];else if(s=this.rules.autolink.exec(e))e=e.substring(s[0].length),"@"===s[2]?(n=":"===s[1].charAt(6)?this.mangle(s[1].substring(7)):this.mangle(s[1]),r=this.mangle("mailto:")+n):(n=i(s[1]),r=n),o+=this.renderer.link(r,null,n);else if(this.inLink||!(s=this.rules.url.exec(e))){if(s=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(s[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(s[0])&&(this.inLink=!1),e=e.substring(s[0].length),o+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):i(s[0]):s[0];else if(s=this.rules.link.exec(e))e=e.substring(s[0].length),this.inLink=!0,o+=this.outputLink(s,{href:s[2],title:s[3]}),this.inLink=!1;else if((s=this.rules.reflink.exec(e))||(s=this.rules.nolink.exec(e))){if(e=e.substring(s[0].length),t=(s[2]||s[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){o+=s[0].charAt(0),e=s[0].substring(1)+e;continue}this.inLink=!0,o+=this.outputLink(s,t),this.inLink=!1}else if(s=this.rules.strong.exec(e))e=e.substring(s[0].length),o+=this.renderer.strong(this.output(s[2]||s[1]));else if(s=this.rules.em.exec(e))e=e.substring(s[0].length),o+=this.renderer.em(this.output(s[2]||s[1]));else if(s=this.rules.code.exec(e))e=e.substring(s[0].length),o+=this.renderer.codespan(i(s[2],!0));else if(s=this.rules.br.exec(e))e=e.substring(s[0].length),o+=this.renderer.br();else if(s=this.rules.del.exec(e))e=e.substring(s[0].length),o+=this.renderer.del(this.output(s[1]));else if(s=this.rules.text.exec(e))e=e.substring(s[0].length),o+=this.renderer.text(i(this.smartypants(s[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(s[0].length),n=i(s[1]),r=n,o+=this.renderer.link(r,null,n);return o},n.prototype.outputLink=function(e,t){var n=i(t.href),r=t.title?i(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,i(e[1]))},n.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},n.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,s=0;s<r;s++)t=e.charCodeAt(s),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},r.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+i(t,!0)+'">'+(n?e:i(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:i(e,!0))+"\n</code></pre>"},r.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},r.prototype.html=function(e){return e},r.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},r.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},r.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},r.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},r.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},r.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},r.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},r.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},r.prototype.strong=function(e){return"<strong>"+e+"</strong>"},r.prototype.em=function(e){return"<em>"+e+"</em>"},r.prototype.codespan=function(e){return"<code>"+e+"</code>"},r.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},r.prototype.del=function(e){return"<del>"+e+"</del>"},r.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(o(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:"))return""}var s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+n+"</a>"},r.prototype.image=function(e,t,n){var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},r.prototype.text=function(e){return e},r.prototype.sequence={fragment_start:function(e,t,n){var r=2*e.on+1,s=2*e.size,i="fragment--"+e.name+" fragment-depth--"+e.depth,o='<div class="fill fill-'+e.id+'"></div>',l='<div class="fragment '+i+'">'+o+'<div class="fragment-title"><span>'+e.name+" "+t+"</span></div></div>";return this._row(r,s,l,n)},fragment_end:function(e,t){var n=2*e.on+1,r=2*e.size,s="fragment--"+e.name+" fragment-depth--"+e.depth,i='<div class="fragment-end '+s+" fill-"+e.id+'"></div>';return this._row(n,r,i,t)},guard:function(e,t,n,r){var s=2*e.on+1,i=2*e.size,o="fragment--"+e.name+" fragment-depth--"+e.depth,l={"[":"]","{":"}"},a=l[t],h='<div class="guard '+o+" "+(e.guards?"bordered":"")+'"><span>'+t+n+a+"</span></div>";return this._row(s,i,h,r)},message:function(e,t,n){var r=2*e.left+2,s=Math.max(2*(e.right-e.left),1),i='<div class="message '+e.line+" "+e.dir+'"><span>'+t+"</span></div>";return this._row(r,s,i,n)},note:function(e,t,n){var r=2*e.on+("left"===e.side?0:"over"===e.side?1:2),s=Math.max(2*e.size,1),i=" align-"+e.align,o='<div class="note'+i+'">'+t+"</div>";return this._row(r,s,o,n)},padding:function(e,t){var n='<td colspan="2">'+(t?'<div class="fill fill-'+t+'"></div>':"")+"</td>";return'<tr class="padding"><td colspan="2"></td>'+new Array(e+1).join(n)+"</tr>"},execution:function(e,t,n){var r='<tr class="execution"><td colspan="2"></td>';t=t||[];for(var s=0;s<e;s++)r+='<td colspan="2">',n[s]?r+='<div class="fill fill-'+n[s]+'"></div>':t[s]&&(r+='<div class="fill--end fill-'+t[s]+'"></div>'),r+="</td>";return r+"</tr>"},_row:function(e,t,n,r){var s,i="<tr>",o=0;do{s=1&o?"":'class="pipe"',i+=o===e?'<td colspan="'+t+'" '+s+">"+n+"</td>":"<td "+s+"></td>"}while((o+=o===e?t:1)<r);return i+"</tr>\n"}},s.parse=function(e,t,n){return new s(t,n).parse(e)},s.prototype.parse=function(e){this.inline=new n(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},s.prototype.next=function(){return this.token=this.tokens.pop()},s.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},s.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},s.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"sequence":return this.sequence(this.token);case"table":var e,t,n,r,s="",i="";for(n="",e=0;e<this.token.header.length;e++)({header:!0,align:this.token.align[e]}),n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(s+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});i+=this.renderer.tablerow(n)}return this.renderer.table(s,i);case"blockquote_start":for(var i="";"blockquote_end"!==this.next().type;)i+=this.tok();return this.renderer.blockquote(i);case"list_start":for(var i="",o=this.token.ordered;"list_end"!==this.next().type;)i+=this.tok();return this.renderer.list(i,o);case"list_item_start":for(var i="";"list_item_end"!==this.next().type;)i+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(i);case"loose_item_start":for(var i="";"list_item_end"!==this.next().type;)i+=this.tok();return this.renderer.listitem(i);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},s.prototype.sequence=function(e){var t,n,r,s,i,o="",l=this.renderer.sequence,a=e.actors.length,h=new Array(a),u=e.signals,c=[],d=2*a+2,f=this.inline.output(e.title),g=p();for(o+='<div class="sequence-diagram">\n<div class="diagram-title"><span>'+f+'</span></div><div class="diagram-body">\n<table class="table"><thead><tr><th></th>\n',t=0;t<a;t++)f=this.inline.output(e.actors[t]),o+='<th colspan="2"><div class="actor">'+f+"</div></th>\n";for(o+='<th></th></tr></thead><tbody class="fill-'+g+'">\n',o+=l.padding(a,g),t=0;t<u.length;t++){switch(r=u[t],f=this.inline.output(r.desc),r.type){case"message":i={},o+=l.message(r,f,d);for(n in r.starts)r.starts.hasOwnProperty(n)&&(i[n]=h[n]=p());o+=l.execution(a,h,i);for(n in r.ends)r.ends.hasOwnProperty(n)&&delete h[n];break;case"note":o+=l.note(r,f,d);break;case"fragment_start":if(c.unshift({name:r.name,on:r.on,size:r.size,guards:0,depth:c.length,id:p(r.name)}),o+=l.fragment_start(c[0],f,d),u[t+1]&&"guard"===u[t+1].type)continue;break;case"fragment_end":s=c.shift(),o+=l.fragment_end(s,d);break;case"guard":c.length&&(o+=l.guard(c[0],r.ends,f,d),c[0].guards++)}o+=l.padding(a)}for(;c.length;)o+=l.fragment_end(c[0],d),o+=l.padding(a),c.shift();return o+=l.padding(a),o+="</tbody></table></div></div>\n"},a.exec=a,d.options=d.setOptions=function(e){return h(d.defaults,e),d},d.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new r,xhtml:!1},d.Parser=s,d.parser=s.parse,d.Renderer=r,d.Lexer=t,d.lexer=t.lex,d.InlineLexer=n,d.inlineLexer=n.output,d.parse=d,e.exports=d}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(t,n(3))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n}]);