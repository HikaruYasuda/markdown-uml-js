# Markdownでシーケンス図 Demo

## シーケンス図記法

#### 開始

先頭に`SD (任意タイトル)__/`を付ければ以降シーケンス図のコマンドになります。（空改行で終了）  
`SD`でも`sd`でもどちらでも構いません。末尾の`__/`もアンダースコアが2個以上連続してスラッシュが付いていればOKです。
sdは Sequence Diagram の略で一般的なシーケンスUMLの頭についているものです。

SD (任意タイトル)__/

#### メッセージとメモ

`---`が同期、`...`が応答、`===`が非同期です。（`=`が非同期なのは平行線だからと覚えてください）

```
sd__/
のび太 -> ドラえもん : 道具要求(同期)
のび太 <. ドラえもん : ひみつ道具(応答)
のび太 => ジャイアン : 奪われる(非同期)
[]ジャイアン : お前のものは  
おれのもの
[ジャイアン,スネ夫] : いたずら
```

sd__/
のび太 -> ドラえもん : 道具要求(同期)
のび太 <. ドラえもん : ひみつ道具(応答)
のび太 => ジャイアン : 奪われる(非同期)
[]ジャイアン : お前のものは  
おれのもの
[ジャイアン,スネ夫] : いたずら


#### アクター（オブジェクト）にエイリアス名をつける

```
sd__/
甲=のび太 | 乙=ジャイアン | 丙=ドラえもん
甲<-乙     : 野球来い
甲----->丙 : なんか道具だして
甲<.....丙 : しょうがないな
```

sd__/
甲=のび太 | 乙=ジャイアン | 丙=ドラえもん
甲<-乙     : 野球来い
甲----->丙 : なんか道具だして
甲<.....丙 : しょうがないな

#### サンプル

SD 決済処理 __/
u=ユーザ | s= アプリケーションサーバ | a =アプリケーション | d=データベース
  u->s         : カート画面取得(Cookie)
     s->a      : カート画面取得(Cookie)
    [s,    d]  : 共通ログインチェック
ref       [d]  : 商品検索
        a->d   : カート内の商品検索
        a<.d   :
/ref
neg [s,    d]  : エラー
[              : 商品がない
     s<.a      : エラー画面出力
/neg
      []a      : 商品関連情報も出力する
     s<.a      : 商品一覧と入力フォームを出力
  u<.s         :
  u->          : self-call
  u->s         : 決済情報送信(Cookie,商品ID,決済情報)
     s->a      : 決済情報送信(Cookie,商品ID,決済情報)
    [s,    d]  : 共通ログインチェック
ref       [d]  : 商品検索
        a->d   : 商品検索
        a<.d   :
/ref
neg [s, a]     : エラー
[              : 決済情報エラー OR 商品がない
     s<.a      : エラー画面出力
/neg:
        a->d   : 購入情報更新(ユーザID,購入情報)
        a<.d   :
     s<.a      :
  u<.s         :


